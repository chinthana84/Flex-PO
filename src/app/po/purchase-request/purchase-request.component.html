<div class="row">
  <section class="col-lg-12">
    <div class="card">

      <div class="card-body">
        <div class="tab-content p-0">
          <div *ngIf="!edited">
            <app-search (searchClicked)="setPage($event)" [search]="this.gridOption.searchObject"></app-search>
            <table class="table  ">
              <thead>
                <th>PONo</th>
                <th>DepartmentName</th>
                <th>SupplierName</th>
                <th>ShipTo</th>
                <th>CreateDate</th>
                <th>
                  <button (click)="Action(null)" class="btn btn-primary ">
                    <span class="fa fa-plus"></span></button>
                </th>
              </thead>
              <tbody>

                <tr *ngFor="let item of gridOption.datas.pagedItems" class="table-hover">
                  <td>{{ item.Pono }}</td>
                  <td>{{ item.DepartmentName }}</td>
                  <td>{{ item.SupplierName }}</td>
                  <td>{{ item.ShipTo }}</td>
                  <td>{{ item.CreateDate }}</td>
                  <td>
                    <div class="btn-group">
                      <button (click)="Action(item)" class="btn btn-primary  ">
                        <span class="fa fa-edit"></span></button>

                    </div>


                  </td>
                </tr>
                <tr *ngIf="this.gridOption.datas.pagedItems==0">
                  <td class="datanotfound" colspan="7">Data not found</td>
                </tr>
              </tbody>
            </table>

            <br />
            <app-pager (pagedClicked)="setPage($event)" [pagerX]="gridOption"></app-pager>
          </div>

          <form (ngSubmit)="onSubmit(model)" *ngIf="edited" novalidate #heroForm="ngForm">
            <div class="row">
              <div class="col-md-6">

                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">
                      <i class="fas fa-chart-pie mr-1"></i>
                      Supplier
                    </h3>
                  </div>
                  <div class="card-body">
                    <div class="tab-content p-0">

                      <div class="row">
                        <div class="col-md-12">
                          <div class="form-group">
                            <label for="Name">Name</label>
                            <input id="Name" name="Name" type="text" autocomplete="off" [(ngModel)]="model"
                              [resultFormatter]="formatter" [inputFormatter]="formatterx" [ngbTypeahead]="search"
                              (selectItem)="selectedItem($event)" class="form-control" placeholder="Name" />
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                          <table class="table table-bordered">
                            <tbody>
                              <tr>
                                <td>Name</td>
                                <td>{{ this.modelSupplier.SupplierName}}</td>
                              </tr>
                              <tr>
                                <td>Address</td>
                                <td>{{ this.modelSupplier.SupplierAddress}}</td>
                              </tr>
                              <tr>
                                <td>City </td>
                                <td>{{this.modelSupplier.City}}</td>
                              </tr>
                              <tr>
                                <td>State</td>
                                <td>{{this.modelSupplier.State}}</td>
                              </tr>
                              <tr>
                                <td>Post Code</td>
                                <td>{{this.modelSupplier.Postcode}}</td>
                              </tr>


                            </tbody>
                          </table>
                        </div>
                        <div class="col-md-6">
                          <table class="table table-bordered">
                            <tbody>

                              <tr>
                                <td>Contact</td>
                                <td>{{this.modelSupplier.Contact}}</td>
                              </tr>
                              <tr>
                                <td>Phone</td>
                                <td>{{this.modelSupplier.Phone}}</td>
                              </tr>
                              <tr>
                                <td>Fax</td>
                                <td>{{this.modelSupplier.Fax}}</td>
                              </tr>


                              <tr>
                                <td>Email</td>
                                <td>{{this.modelSupplier.Email}}</td>
                              </tr>

                            </tbody>
                          </table>
                        </div>
                      </div>


                    </div>
                  </div>
                </div>



              </div>

              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">
                      <i class="fas fa-chart-pie mr-1"></i>
                      Other
                    </h3>
                  </div>
                  <div class="card-body">

                    <div class="row">
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="DepartmentId">Department</label>
                          <ng-select placeholder="Select item"  [clearable]="false" name="DepartmentId" [(ngModel)]="this.modelPR.DepartmentId">
                            <ng-option [value]="0" disabled selected>Please Select</ng-option>
                            <ng-option *ngFor="let car of this.loggedUserDepartments" [value]="car.DepartmentId">
                              {{car.DepartmentName}}
                            </ng-option>
                          </ng-select>
                        </div>
                      </div>
                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="ShiptTo">ShiptTo</label>
                          <ng-select [clearable]="false" name="ShiptTo" [(ngModel)]="this.modelPR.ShipToRefId">
                            <ng-option [value]="0" disabled selected>Please Select</ng-option>
                            <ng-option *ngFor="let car of this.modelShiptTo" [value]="car.RefId">
                              {{car.RefDescription}}
                            </ng-option>
                          </ng-select>
                        </div>
                      </div>




                      <div class="col-md-12">

                        <div class="form-group">
                          <div class="input-group">
                            <input class="form-control" placeholder="dd/mm/yyyy" name="d2" #c2="ngModel"
                              [(ngModel)]="modelPR.Podate"                               ngbDatepicker #d2="ngbDatepicker">
                            <div class="input-group-append">
                              <button class="btn btn-outline-secondary calendar" (click)="d2.toggle()"
                                type="button"></button>
                            </div>
                          </div>
                        </div>

                      </div>





                        <div class="col-md-12">
                          <div class="form-group">
                            <label for="City">Quote Ref</label>
                            <input class="form-control" id="quoteRef" name="quoteRef" type="text"
                              [(ngModel)]="this.modelPR.Reference" placeholder="quoteRef" />
                          </div>
                        </div>


                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <section class="col-lg-12">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">
                      <i class="fas fa-chart-pie mr-1"></i>
                      Details
                    </h3>
                  </div>
                  <div class="card-body">
                    <div class="tab-content p-0">

                      <table class="table  ">
                        <thead>
                          <th>Quantity</th>
                          <th>Reference</th>
                          <th>Description</th>
                          <th>Account Code</th>
                          <th>Job Code</th>
                          <th>Unit Price</th>
                          <th>Amount</th>
                          <th>
                            <button type="button" (click)="openXl(content)" class="btn btn-primary ">
                              <span class="fa fa-plus"></span></button>
                          </th>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of this.modelPR.PurchaseRequestDetail; let i=index;" class="table-hover">
                            <td>{{item.Qty}}</td>
                            <td>{{item.Reference}}</td>
                            <td> {{item.Item.ItemDescription}} </td>
                            <td>{{item.AccountList.AccountCode}}</td>
                            <td>{{item.JobRef.RefDescription}}</td>
                            <td>{{item.UnitPrice}}</td>
                            <td>Amount</td>
                            <td>
                              <button type="button" (click)="AddRow()" class="btn btn-primary ">
                                <span class="fa fa-plus"></span></button>

                            </td>
                          </tr>
                        </tbody>
                      </table>

                    </div>
                  </div>
                </div>
              </section>
            </div>
            <div class="btn-group">
              <button type="button" (click)="Save();" class="btn btn-primary save_button"> <span class="fa fa-save"></span> </button>
              <button type="button" (click)="router.navigate(['AccountList']);" class="btn btn-primary back_button">
                <span class="fa fa-arrow-left"></span> </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
</div>
{{this.modelPR.Podate |json}}

<ng-template #content let-modal>
  <app-poitem></app-poitem>
</ng-template>

<!-- <label for="ItemDescription">supplierSearch</label>
<input id="typeahead-http" type="text" [resultFormatter]="formatter"
[inputFormatter]="formatterx"
class="form-control mx-sm-3" [class.is-invalid]="searchFailed"
 [(ngModel)]="model"  typeaheadOptionField="Name" [ngbTypeahead]="search" placeholder="Wikipedia search" />

 -->

<!-- <div class="row">
  <section class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <i class="fas fa-chart-pie mr-1"></i>
          Sales
        </h3>
      </div>
      <div class="card-body">
        <div class="tab-content p-0"></div>
      </div>
    </div>
  </section>
</div> -->
